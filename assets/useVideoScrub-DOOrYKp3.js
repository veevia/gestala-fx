import{r as y}from"./index-9po6QOFo.js";const E=(f,l)=>{y.useEffect(()=>{const t=f.current;if(!t)return;let c=0,r=0,a="scrubbing",i=null;const u=800,v=.1;let m,d;const w=()=>{if(t.duration){const e=window.innerHeight,n=Math.min(1,window.scrollY/e);p(n)}},h=e=>{const n=l.current;if(!n)return;const s=n.getBoundingClientRect(),g=e.clientX-s.left,M=e.clientY-s.top,P=Math.max(0,Math.min(1,g/s.width)),x=Math.max(0,Math.min(1,M/s.height)),T=(P+x)/2;window.scrollY===0&&p(T)},p=e=>{a="scrubbing",i=null,t.paused||t.pause(),clearTimeout(m),c=e,m=setTimeout(()=>{a="coasting",i=performance.now()},500)},b=()=>{if(t.duration){if(a==="coasting"&&i){const n=performance.now()-i;if(n<u){const s=1-Math.pow(1-n/u,3),g=u/1e3/t.duration*s;c=r+g}else t.play(),i=null}const e=c-r;Math.abs(e)>1e-4?r+=e*v:a==="scrubbing"&&(r=c),t.currentTime=t.duration*r}d=requestAnimationFrame(b)};b();const o=l.current;return o==null||o.addEventListener("mousemove",h),window.addEventListener("scroll",w),()=>{o==null||o.removeEventListener("mousemove",h),window.removeEventListener("scroll",w),clearTimeout(m),d&&cancelAnimationFrame(d)}},[f,l])};export{E as u};
